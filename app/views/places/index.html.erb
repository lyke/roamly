<%# <p style="color: green"><%= notice %></p> %>

<h1>Places</h1>

<div id="places">
  <div class="index-grid places-card">
    <% @places.each do |place| %>
      <div class="card" style="width: 29rem";>
        <div class="container">
          <div >
              <div class="card-img-top card_places pt-2 p-auto">
                <% if place.photos.attached? %>
                    <% place.photos.each do |photo| %>
                      <%= cl_image_tag photo.key, height: 00, width: 400, crop: :fill, class: "card-img" %>
                    <% end %>
                <% end %>
              </div>

              <div class="card-title">
              <%= link_to place.name, place_path(place) %>
              </div>
              <div class="card-text">
                <%= place.description.first(300) + "..." %>
              </div>

              <h2 class="card-price"><%= place.price %>â‚¬</h2>
          </div>
        </div>
      </div>
    <% end %>
    <div style="width: 100%; height: 600px;"
      data-controller="map"
      data-map-markers-value="<%= @markers.to_json %>"
      data-map-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>">
    </div>
</div>
<%= link_to "New place", new_place_path %>


  <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">

    <% @place.photos.each_with_index do |photo, index| %>
      <ol class="carousel-indicators">
        <li data-target="#carouselExampleIndicators" data-slide-to="<%= index %>"></li>
      </ol>
      <div class="item">
        <div class="carousel-item <%= index == 0 ? 'active' : '' %>">
          <%= cl_image_tag photo.key, height: 500, width: 600, crop: :fill, class: "d-block w-100" %>
        </div>
      </div>
    <% end %>

    <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="sr-only">Previous</span>
    </a>
    <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="sr-only">Next</span>
    </a>
  </div>
